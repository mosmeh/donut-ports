pico-8 cartridge // http://www.pico-8.com
version 35
__lua__
function _init()
	a,b=1,1
	r1,r2,k1,k2=1,2,80,5
end

function _update()
	a+=0.01
	b+=0.005
end

function _draw()
	cls()
	local ca,sa,cb,sb=cos(a),sin(a),cos(b),sin(b)
	for j=0,1,0.02 do
		local ct,st=cos(j),sin(j)
		for i=0,1,0.02 do
			local sp,cp=sin(i),cos(i)
			local ox,oy=r2+r1*ct,r1*st
			local sasp,oyca=sa*sp,oy*ca
			local x,y=ox*(cb*cp+sasp*sb)-oyca*sb,ox*(sb*cp-sasp*cb)+oyca*cb
			local k1oz=k1/(k2+ca*ox*sp+sa*oy)
			local xp,yp=64+k1oz*x,64-k1oz*y
			local l=cp*ct*sb-ca*ct*sp-sa*st+cb*(ca*st-ct*sasp)
			if l>0.7 then
				pset(xp,yp,7)
			else
				pset(xp,yp,6)
			end
		end
	end
end
__gfx__
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
